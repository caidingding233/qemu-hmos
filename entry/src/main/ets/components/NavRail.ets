/**
 * å·¦ä¾§å¯¼èˆª Rail ç»„ä»¶
 * ä¸‰é¡¹ï¼šè™šæ‹Ÿæœº / Apps / æˆ‘çš„
 */

export interface NavItem {
  id: string
  icon: string  // å›¾æ ‡å­—ç¬¦æˆ–è·¯å¾„
  label: string
  isActive: boolean
}

@Component
export struct NavRail {
  @State navItems: NavItem[] = [
    { id: 'vms', icon: 'ðŸ’»', label: 'è™šæ‹Ÿæœº', isActive: true },
    { id: 'apps', icon: 'ðŸ“±', label: 'Apps', isActive: false },
    { id: 'mine', icon: 'ðŸ‘¤', label: 'æˆ‘çš„', isActive: false }
  ]
  
  onNavItemClick?: (itemId: string) => void

  build() {
    Column() {
      ForEach(this.navItems, (item: NavItem) => {
        Column() {
          // å›¾æ ‡
          Text(item.icon)
            .fontSize(20)
            .fontColor(item.isActive ? '#007AFF' : '#8E8E93')
            .margin({ bottom: 4 })
          
          // æ–‡å­—æ ‡ç­¾
          Text(item.label)
            .fontSize(12)
            .fontColor(item.isActive ? '#007AFF' : '#8E8E93')
            .fontWeight(item.isActive ? FontWeight.Medium : FontWeight.Normal)
        }
        .width(64)
        .height(64)
        .justifyContent(FlexAlign.Center)
        .backgroundColor(item.isActive ? 'rgba(0, 122, 255, 0.1)' : 'transparent')
        .borderRadius(12)
        .margin({ bottom: 8 })
        .onClick(() => {
          // æ›´æ–°é€‰ä¸­çŠ¶æ€
          this.navItems.forEach(navItem => {
            navItem.isActive = navItem.id === item.id
          })
          
          // å›žè°ƒé€šçŸ¥çˆ¶ç»„ä»¶
          if (this.onNavItemClick) {
            this.onNavItemClick(item.id)
          }
        })
      })
    }
    .width(72)
    .height('100%')
    .backgroundColor('#F2F2F7')
    .padding({ top: 16, bottom: 16 })
    .justifyContent(FlexAlign.Start)
  }
}